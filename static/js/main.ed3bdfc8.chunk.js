(this["webpackJsonptinder-for-movies"]=this["webpackJsonptinder-for-movies"]||[]).push([[0],{102:function(e,t,c){"use strict";c.r(t);var n=c(5),a=c.n(n),s=c(47),i=c.n(s),r=(c(56),c(2)),o=c.n(r),m=c(7),u=(c(58),Object(n.createContext)({movies:[],isLoading:!0,error:""})),d=c(4),j=function(){var e=Object(m.a)(o.a.mark((function e(t,c){var n,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://61b7ea5e64e4a10017d18cff.mockapi.io",n={accepted:"accept"===c?"true":"false"},a={method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}},e.next=5,fetch("".concat("https://61b7ea5e64e4a10017d18cff.mockapi.io","/recommendations/").concat(t,"/").concat(c),a);case 5:return s=e.sent,e.next=8,s.json();case 8:i=e.sent,console.log("".concat(t," is updated"),i);case 10:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),p=c(3),b=function(e){var t=e.movie,c=e.accept,a=e.reject,s=function(e){var t=e.data,c=void 0===t?"":t,a=e.rightAction,s=void 0===a?function(e){return e}:a,i=e.leftAction,r=void 0===i?function(e){return e}:i,o=Object(n.useState)(0),m=Object(d.a)(o,2),u=m[0],j=m[1],p=Object(n.useState)(0),b=Object(d.a)(p,2),l=b[0],f=b[1];return[function(e){j(e.targetTouches[0].clientX)},function(e){f(e.targetTouches[0].clientX)},function(){u-l>180&&r(c),u-l<-180&&s(c)}]}({rightAction:a,data:t.id}),i=Object(d.a)(s,3),r=i[0],o=i[1],m=i[2];return Object(p.jsxs)("div",{className:"movie-frame",onTouchStart:r,onTouchMove:o,onTouchEnd:m,children:[Object(p.jsxs)("div",{className:"movie-data",children:[Object(p.jsx)("span",{children:t.title})," (".concat(t.rating,"/10)")]}),Object(p.jsx)("img",{className:"movie-img",src:t.imageURL,alt:"".concat(t.title," poster")}),Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsxs)("button",{className:"accept",onClick:c,children:[Object(p.jsx)("span",{children:" \u2713 "})," Accept"]}),Object(p.jsxs)("button",{className:"reject",onClick:a,children:[" Reject ",Object(p.jsx)("span",{children:"\xd7"})]})]})]})},l=function(){var e=Object(n.useContext)(u),t=e.movies,c=e.isLoading,a=e.error,s=Object(n.useState)(0),i=Object(d.a)(s,2),r=i[0],o=i[1],m=function(){return o(r+1)};return c?Object(p.jsx)("div",{className:"movie-frame no-movies",children:Object(p.jsx)("span",{children:"Loading..."})}):!c&&0===t.length&&a?Object(p.jsx)("div",{className:"movie-frame no-movies",children:Object(p.jsx)("span",{children:a.toString()})}):c||0!==t.length||a?t.length<=r?Object(p.jsx)("div",{className:"movie-frame no-movies",children:Object(p.jsx)("span",{children:"No more movies in your list"})}):Object(p.jsx)(b,{movie:t[r],accept:function(){j(t[r].id,"accept"),m()},reject:function(){j(t[r].id,"reject"),m()}}):Object(p.jsx)("div",{className:"movie-frame no-movies",children:Object(p.jsx)("span",{children:"Nothing to show"})})};Object(m.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=4;break;case 4:case"end":return e.stop()}}),e)})))();var f=function(){var e=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),i=Object(d.a)(s,2),r=i[0],u=i[1],j=Object(n.useState)(""),p=Object(d.a)(j,2),b=p[0],l=p[1];return Object(n.useEffect)((function(){Object(m.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,fetch("".concat("https://61b7ea5e64e4a10017d18cff.mockapi.io","/recommendations/"));case 4:if(200===(t=e.sent).status){e.next=8;break}throw console.log("Error",t.status,t.statusText),new Error(t.statusText);case 8:return e.next=10,t.json();case 10:c=e.sent,u(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),l(e.t0);case 17:a(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))()}),[]),{movies:r,isLoading:c,error:b}}();return Object(p.jsx)(u.Provider,{value:e,children:Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)("h1",{className:"app-title",children:"Tinder for Movies"}),Object(p.jsx)(l,{})]})})};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(f,{})}),document.getElementById("root"))},103:function(e,t,c){"use strict";c.r(t),c.d(t,"worker",(function(){return u}));var n=c(9),a=c(36),s=c(20),i=c(6),r=c(37),o=function(e){return r.recommendations.find((function(t){return t.id===e.params.id}))},m=[i.c.get("/recommendations",(function(e,t,c){return t(c.status(200),c.json(r.recommendations))})),i.c.put("/recommendations/:id/accept",(function(e,t,c){return t(c.status(200),c.json(Object(s.a)(Object(s.a)({},o(e)),{},{accepted:!0})))})),i.c.put("/recommendations/:id/reject",(function(e,t,c){return t(c.status(200),c.json(Object(s.a)(Object(s.a)({},o(e)),{},{accepted:!1})))}))],u=a.a.apply(void 0,Object(n.a)(m))},37:function(e){e.exports=JSON.parse('{"recommendations":[{"id":"2301abc","imageURL":"https://images-na.ssl-images-amazon.com/images/M/MV5BOTAzODEzNDAzMl5BMl5BanBnXkFtZTgwMDU1MTgzNzE@._V1_SY1000_CR0,0,677,1000_AL_.jpg","title":"Star Wars: Episode VII - The Force Awakens","summary":"Lorem ipsum\u2026.","rating":8.2,"accepted":"false"},{"id":"ab1232c","imageURL":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQr52xgKbOq-XJuwQEknttmudqatCNYwXUIg3O4k02E6eNZmPXd","title":"Clifford","summary":"Lorem ipsum\u2026.","rating":6.9,"accepted":"true"},{"id":"2221abc","imageURL":"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSvJznVehDbSUPihJbSTNwH8Tgnvh4ZDxs0J4hV06wOvHHidHul","title":"Dune","summary":"Lorem ipsum\u2026.","rating":8.2,"accepted":"false"},{"id":"ab00232c","imageURL":"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQZMLWz4PLL32_flgDQHPBnU02dBLRw9RZccKZWJqVgvN6sSPTk","title":"Auf der anderen Seite","summary":"Lorem ipsum\u2026.","rating":6.9,"accepted":"true"},{"id":"2331abc","imageURL":"https://fwcdn.pl/fpo/02/04/720204/7735388.3.jpg","title":"Captain Fantastic","summary":"Lorem ipsum\u2026.","rating":8.2,"accepted":"true"},{"id":"ab1200c","imageURL":"https://m.media-amazon.com/images/I/61sp1GYsdpL._AC_.jpg","title":"The Road","summary":"Lorem ipsum\u2026.","rating":6.9,"accepted":"false"}]}')},56:function(e,t,c){},58:function(e,t,c){}},[[102,1,2]]]);
//# sourceMappingURL=main.ed3bdfc8.chunk.js.map