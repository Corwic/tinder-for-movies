(this["webpackJsonptinder-for-movies"]=this["webpackJsonptinder-for-movies"]||[]).push([[0],{12:function(e,t,c){},13:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(7),o=c.n(r),s=(c(12),c(13),Object(n.createContext)([])),i=c(2),u=c(3),j=c.n(u),d=c(4),l=c(6),O=function(){var e=Object(d.a)(j.a.mark((function e(t,c){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object({NODE_ENV:"production",PUBLIC_URL:"/tinder-for-movies",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,a=Object(l.a)(Object(l.a)({},t),{},{accepted:"accept"===c?"true":"false"}),r={method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}},e.prev=3,e.next=6,fetch("".concat(n,"/recommendations/").concat(t.id,"/").concat(c),r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Problem with sending results",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,c){return e.apply(this,arguments)}}(),b=c(0),v=function(e){var t=e.movie,c=e.accept,a=e.reject,r=function(e){var t=e.action,c=e.data,a=Object(n.useState)(0),r=Object(i.a)(a,2),o=r[0],s=r[1],u=Object(n.useState)(0),j=Object(i.a)(u,2),d=j[0],l=j[1];return[function(e){s(e.targetTouches[0].clientX)},function(e){l(e.targetTouches[0].clientX)},function(){o-d<-180&&t(c)}]}({action:a,data:t.id}),o=Object(i.a)(r,3),s=o[0],u=o[1],j=o[2];return Object(b.jsxs)("div",{className:"movieFrame",onTouchStart:s,onTouchMove:u,onTouchEnd:j,children:[Object(b.jsxs)("div",{className:"movieData",children:[Object(b.jsx)("span",{children:t.title})," (".concat(t.rating,"/10)")]}),Object(b.jsx)("img",{className:"movieImg",src:t.imageURL,alt:"".concat(t.title," poster")}),Object(b.jsxs)("div",{className:"buttons",children:[Object(b.jsxs)("button",{className:"accept",onClick:c,children:[Object(b.jsx)("span",{children:" \u2713 "})," Accept"]}),Object(b.jsxs)("button",{className:"reject",onClick:a,children:[" Reject ",Object(b.jsx)("span",{children:"\xd7"})]})]})]})},h=function(){var e=Object(n.useContext)(s),t=Object(n.useState)(0),c=Object(i.a)(t,2),a=c[0],r=c[1],o=function(){return r(a+1)};return 0===e.length?Object(b.jsx)("div",{className:"movieFrame noMovies",children:Object(b.jsx)("span",{children:"Nothing to show"})}):(null===e||void 0===e?void 0:e.length)>a?Object(b.jsx)(v,{movie:e[a],accept:function(){O(e[a],"accept"),o()},reject:function(){O(e[a],"reject"),o()}}):Object(b.jsx)("div",{className:"movieFrame noMovies",children:Object(b.jsx)("span",{children:"No more movies in your list"})})};var p=function(){var e=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){Object(d.a)(j.a.mark((function e(){var t,c,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object({NODE_ENV:"production",PUBLIC_URL:"/tinder-for-movies",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL,e.prev=1,e.next=4,fetch("".concat(t,"/recommendations/"));case 4:return c=e.sent,e.next=7,c.status;case 7:if(200===(n=e.sent)){e.next=11;break}return console.log(n),e.abrupt("return");case 11:return e.next=13,c.json();case 13:r=e.sent,a(r),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("GET request failed",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))()}),[]),{data:c}}(),t=e.data;return Object(b.jsx)(s.Provider,{value:t,children:Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)("h1",{className:"appTitle",children:"Tinder for Movies"}),Object(b.jsx)(h,{})]})})},f=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,17)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;c(e),n(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),f()}},[[16,1,2]]]);
//# sourceMappingURL=main.0a96d524.chunk.js.map